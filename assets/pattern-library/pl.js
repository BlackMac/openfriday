"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Array.from||(Array.from=function(a){return[].slice.call(a)});var APP=function(){function a(){_classCallCheck(this,a),this.clickEvent="ontouchstart"in window?"touchend":"click"}return _createClass(a,[{key:"init",value:function(){this.header=new Header(this),this.footer=new Footer(this),this.blogTeaser=new BlogTeaser(this),this.stageVideo=new VideoStage(this),this.lightbox=new Lightbox,this.gridGallery=new GridGallery(this),this.linkReplacement()}},{key:"linkReplacement",value:function(){function a(a){var b=document.querySelector(".product-teaser");void 0!==b&&null!=b&&(b.querySelector(".gtm-product-teaser-basic").href=a.basic,b.querySelector(".gtm-product-teaser-simquadrat").href=a.simquadrat,b.querySelector(".gtm-product-teaser-team").href=a.team,b.querySelector(".gtm-product-teaser-team-mobilfunk").href=a.teamMobilfunk,b.querySelector(".gtm-product-teaser-trunking").href=a.trunking,b.querySelector(".gtm-product-teaser-io").href=a.io)}function b(a){var b=document.querySelector(".gtm-product-login");void 0!==b&&null!=b&&(b.href=a.login)}var c=window.location.hostname,d={local:{basic:"http://www.local.sipgate.de/basic",simquadrat:"http://www.local.simquadrat.de",team:"http://www.local.sipgateteam.de",teamMobilfunk:"http://www.local.sipgate.de/team/mobilfunk",trunking:"http://www.local.sipgate.de/trunking",io:"http://www.local.sipgate.io",login:"http://local.login.sipgate.com"},dev:{basic:"http://www.dev.sipgate.de/basic",simquadrat:"https://www.dev.simquadrat.de",team:"https://www.dev.sipgateteam.de",teamMobilfunk:"http://www.dev.sipgate.de/team/mobilfunk",trunking:"http://www.dev.sipgate.de/trunking",io:"https://www.dev.sipgate.io",login:"https://login.dev.sipgate.com/"}};c.indexOf("local.")>=0&&(b(d.local),a(d.local)),c.indexOf("dev.")>=0&&(b(d.dev),a(d.dev))}}]),a}();$(document).ready(function(){var a=new APP;a.init()});var BlogTeaser=function(){function a(b){_classCallCheck(this,a),this.app=b,this.ctx=document.body.querySelector(".blog-teaser-posts"),this.blogPostsUrl="https://www.sipgateblog.de/wp-json/wp/v2/posts?orderby=date&order=desc&per_page=3",this.blogUsersUrl="https://www.sipgateblog.de/wp-json/wp/v2/users?",this.blogCategoryUrl="https://www.sipgateblog.de/wp-json/wp/v2/categories?",this.blogMediaUrl="https://www.sipgateblog.de/wp-json/wp/v2/media?",this.postData={},void 0!==this.ctx&&null!=this.ctx&&(this.init(),this.loadBlogPostData())}return _createClass(a,[{key:"init",value:function(){var a=130;$(this.ctx).slick({dots:!0,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerPadding:"416px",centerMode:!0,variableWidth:!1,arrows:!0,responsive:[{breakpoint:15*a,settings:{dots:!0,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerMode:!0,variableWidth:!1,centerPadding:"416px"}},{breakpoint:12*a,settings:{dots:!0,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerMode:!0,variableWidth:!1,centerPadding:"299px"}},{breakpoint:10*a,settings:{dots:!0,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerMode:!0,variableWidth:!1,centerPadding:"221px"}},{breakpoint:8*a,settings:{dots:!0,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerMode:!0,variableWidth:!1,centerPadding:"104px"}},{breakpoint:7*a,settings:{dots:!1,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerMode:!0,variableWidth:!1,centerPadding:"104px"}},{breakpoint:5*a,settings:{dots:!1,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerMode:!0,variableWidth:!1,centerPadding:"52px"}},{breakpoint:4*a,settings:{dots:!1,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerMode:!0,variableWidth:!1,centerPadding:"39px"}},{breakpoint:3*a,settings:{dots:!1,infinite:!1,speed:300,autoplay:!1,slidesToShow:1,centerMode:!0,variableWidth:!1,centerPadding:"26px"}}]})}},{key:"loadBlogPostData",value:function(){var a=this;$.getJSON(this.blogPostsUrl,function(b){a.postData=b;var c=[],d=[],e=[];b.forEach(function(a){c.push(a.author),d.push(a.categories[0]),e.push(a.featured_media)});var f=a.blogUsersUrl;c.forEach(function(a){f+="include[]="+a+"&"});var g=a.blogCategoryUrl;d.forEach(function(a){g+="include[]="+a+"&"});var h=a.blogMediaUrl;e.forEach(function(a){h+="include[]="+a+"&"});var i=$.getJSON(h),j=$.getJSON(g),k=$.getJSON(f);$.when(i,j,k).fail(a.handleAjaxError).done(function(b,c,d){a.insertDataIntoSkeletons([{mediaData:b[0]},{categoryData:c[0]},{userData:d[0]}])})})}},{key:"insertDataIntoSkeletons",value:function(a){var b=this,c={};a.forEach(function(a){var b=Object.keys(a)[0];c[b]=a[b]});var d=Array.from(document.getElementsByClassName("blogpost-skeleton"));Array.from(this.postData).forEach(function(a,e){var f=b.fetchObjectByID(c.userData,a.author),g=b.fetchObjectByID(c.categoryData,a.categories[0]),h=d[e];if(h.querySelector(".skeleton-headline").innerHTML=a.title.rendered,a.featured_media>0){var i=b.fetchObjectByID(c.mediaData,a.featured_media);h.querySelector(".skeleton-header-image").src=i.source_url}h.querySelector(".skeleton-author-name").innerHTML=f.name,h.querySelector(".skeleton-author-image").src=f.avatar_urls[96],h.querySelector(".skeleton-category").innerHTML=g.name,h.querySelector(".skeleton-text").innerHTML=a.excerpt.rendered,Array.from(h.querySelectorAll(".skeleton-link")).forEach(function(b){return b.setAttribute("href",a.link)});var j=new Date(a.date),k=j.getFullYear()+"-"+(j.getMonth()+1)+"-"+j.getDate(),l=j.getDate()+"."+(j.getMonth()+1)+"."+j.getFullYear();h.querySelector(".skeleton-publishdate").datetime=k,h.querySelector(".skeleton-publishdate").innerHTML=l,h.classList.remove("blogpost-skeleton")})}},{key:"fetchObjectByID",value:function(a,b){var c={};return a.forEach(function(a){a.id===b&&(c=a)}),c}},{key:"handleAjaxError",value:function(){}}]),a}(),Footer=function(){function a(b){_classCallCheck(this,a),this.app=b,this.ctx=document.querySelector(".page-footer"),this.accordionHeadlines=this.ctx.querySelectorAll(".accordion h6"),this.accordionContainers=this.ctx.querySelectorAll(".accordion"),this.initAccordion()}return _createClass(a,[{key:"initAccordion",value:function(){var b=this;Array.from(this.accordionHeadlines).forEach(function(c){c.addEventListener(b.app.clickEvent,function(d){var e=c.parentElement.parentElement;if(d.preventDefault(),d.stopPropagation(),e.classList.contains("active"))e.classList.remove("active"),e.removeAttribute("style"),e.classList.add("deactive");else{Array.from(b.accordionContainers).forEach(function(a){a.classList.contains("active")&&(a.removeAttribute("style"),a.classList.remove("active"),a.classList.add("deactive"))});var f=a.getHeightOfChildElement(e)*e.children.length;e.style.height=f+"px",e.classList.remove("deactive"),e.classList.add("active")}})})}}],[{key:"getHeightOfChildElement",value:function(a){var b=parseInt(window.getComputedStyle(a.children[0],null).getPropertyValue("margin-bottom").match(/\d+/)[0],10);return b+a.children[0].offsetHeight}}]),a}(),GridGallery=function a(b){var c=this;_classCallCheck(this,a),this.app=b,this.ctx=document.body.querySelectorAll(".grid-gallery"),void 0!==this.ctx&&null!==this.ctx&&Array.from(this.ctx).forEach(function(a){var b=new Freewall($(a));b.reset({selector:".item",animate:!1,cellW:100,cellH:100,gutterX:13,gutterY:13,keepOrder:!1,cacheSize:!1,onResize:function(){b.refresh(),b.fitWidth()}}),b.fitWidth()}),$(function(){$(".gallery").find("img").lazyload({placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",load:function(){$(c).parent().parent().removeClass("loading")}})})},Lightbox=function a(){_classCallCheck(this,a),$("a[data-rel^=lightcase]").lightcase({maxWidth:1920,maxHeight:1080,swipe:!0,forceWidth:!1,forceHeight:!1})},Header=function(){function a(b){_classCallCheck(this,a),this.app=b,this.ctx=document.body.querySelector(".navigation-header"),this.offcanvasMenu=this.ctx.querySelector("nav"),this.header=this.ctx.querySelector("header"),this.offcanvasMenu.className="inactive",this.toggleOffcanvas=document.querySelectorAll(".offcanvas-nav-toggle"),this.initOffcanvas()}return _createClass(a,[{key:"initOffcanvas",value:function(){var a=this;Array.from(this.toggleOffcanvas).forEach(function(b){b.addEventListener(a.app.clickEvent,function(c){c.preventDefault(),c.stopPropagation(),a.header.classList.toggle("active"),b.classList.contains("active")?(b.classList.remove("active"),b.classList.add("deactive")):(b.classList.remove("deactive"),b.classList.add("active")),"active"===a.offcanvasMenu.className?(a.offcanvasMenu.className="inactive",document.body.style.overflow="auto",document.documentElement.style.overflow="auto"):(a.offcanvasMenu.className="active",document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden")})})}},{key:"getStatus",get:function(){return this.status}},{key:"setStatus",set:function(a){this.status=a}}]),a}(),VideoStage=function(){function a(b){_classCallCheck(this,a),this.app=b,this.ctx=document.body.querySelector(".video-stage"),void 0!==this.ctx&&null!==this.ctx&&(this.videoModal=this.ctx.querySelector(".modal"),this.modalOpen=this.ctx.querySelectorAll(".play-icon-toucharea"),this.modalClose=this.ctx.querySelectorAll(".closeModal"),this.videoIFrame=this.ctx.querySelector(".embed-video"),this.overlay=$(this.ctx).find(".modal"),this.videoPlayer=$f(this.videoIFrame),this.initModal(),this.initVideoPlayer())}return _createClass(a,[{key:"initModal",value:function(){var a=this;Array.from(this.modalOpen).forEach(function(b){b.addEventListener(a.app.clickEvent,function(b){b.preventDefault(),b.stopPropagation(),a.videoModal.classList.toggle("active"),a.videoPlayer.api("play")})}),Array.from(this.modalClose).forEach(function(b){b.addEventListener(a.app.clickEvent,function(b){b.preventDefault(),b.stopPropagation(),a.videoModal.classList.toggle("active"),a.videoPlayer.api("pause")})}),this.overlay.on(this.app.clickEvent,function(b){b.target===a.videoModal&&(b.stopPropagation(),b.preventDefault(),a.videoModal.classList.toggle("active"),a.videoPlayer.api("pause"))})}},{key:"initVideoPlayer",value:function(){var a=this;this.videoPlayer.api("setVolume",1),this.videoPlayer.addEvent("ready",function(){a.videoPlayer.api("setVolume",1)}),setTimeout(function(){a.videoPlayer.api("setVolume",1)},1e3)}}]),a}();